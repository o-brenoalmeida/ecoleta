{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Breno\\\\Documents\\\\www\\\\mobile\\\\src\\\\Pages\\\\Points\\\\index.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport Constants from 'expo-constants';\nimport { Feather as Icon } from '@expo/vector-icons';\nimport { useNavigation } from '@react-navigation/native';\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport MapView, { Marker } from 'react-native-maps';\nimport { SvgUri } from 'react-native-svg';\nimport * as Location from 'expo-location';\nimport api from \"../../services/api\";\n\nvar Points = function Points() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      items = _useState2[0],\n      setItems = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedItems = _useState4[0],\n      setSelectedItems = _useState4[1];\n\n  var _useState5 = useState([0, 0]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      initialPosition = _useState6[0],\n      setInitialPosition = _useState6[1];\n\n  var navigation = useNavigation();\n  useEffect(function () {\n    function loadPosition() {\n      var _await$Location$reque, status, localtion, _localtion$coords, latitude, longitude;\n\n      return _regeneratorRuntime.async(function loadPosition$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Location.requestPermissionsAsync());\n\n            case 2:\n              _await$Location$reque = _context.sent;\n              status = _await$Location$reque.status;\n\n              if (!(status !== 'granted')) {\n                _context.next = 7;\n                break;\n              }\n\n              Alert.alert('Ooooops....', 'Precisamos de sua permissão para obter a localização');\n              return _context.abrupt(\"return\");\n\n            case 7:\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync());\n\n            case 9:\n              localtion = _context.sent;\n              _localtion$coords = localtion.coords, latitude = _localtion$coords.latitude, longitude = _localtion$coords.longitude;\n              setInitialPosition([latitude, longitude]);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    loadPosition();\n  }, []);\n  useEffect(function () {\n    api.get('/items').then(function (response) {\n      setItems(response.data);\n    });\n  }, []);\n\n  function handleNavigateBack() {\n    navigation.goBack();\n  }\n\n  function handleNavigatetoDetail() {\n    navigation.navigate('Detail');\n  }\n\n  function handleSelectItem(id) {\n    var alreadySelected = selectedItems.findIndex(function (item) {\n      return item == id;\n    });\n\n    if (alreadySelected >= 0) {\n      var filteredItems = selectedItems.filter(function (item) {\n        return item !== id;\n      });\n      setSelectedItems(filteredItems);\n    } else {\n      setSelectedItems([].concat(_toConsumableArray(selectedItems), [id]));\n    }\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: handleNavigateBack,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, React.createElement(Icon, {\n    name: \"arrow-left\",\n    size: 20,\n    color: \"#34cb79\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  })), React.createElement(Text, {\n    style: styles.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, \"Bem-vindo \"), React.createElement(Text, {\n    style: styles.description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, \"Encontre no mapa um ponto de coleta. \"), React.createElement(View, {\n    style: styles.mapContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, initialPosition[0] !== 0 && React.createElement(MapView, {\n    style: styles.map,\n    initialRegion: {\n      latitude: -initialPosition[0],\n      longitude: initialPosition[1],\n      latitudeDelta: 0.014,\n      longitudeDelta: 0.014\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 25\n    }\n  }, React.createElement(Marker, {\n    style: styles.mapMarker,\n    onPress: handleNavigatetoDetail,\n    coordinate: {\n      latitude: -15.8383886,\n      longitude: -48.0110296\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 29\n    }\n  }, React.createElement(View, {\n    style: styles.mapMarkerContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 33\n    }\n  }, React.createElement(Image, {\n    style: styles.mapMarkerImage,\n    source: {\n      uri: 'https://images.unsplash.com/photo-1556767576-5ec41e3239ea?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=400&q=60'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 37\n    }\n  }), React.createElement(Text, {\n    style: styles.mapMarkerTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 37\n    }\n  }, \"Mercado\")))))), React.createElement(View, {\n    style: styles.itemsContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, React.createElement(ScrollView, {\n    horizontal: true,\n    showsVerticalScrollIndicator: false,\n    contentContainerStyle: {\n      paddingHorizontal: 20\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  }, items.map(function (item) {\n    return React.createElement(TouchableOpacity, {\n      key: String(item.id),\n      style: [styles.item, selectedItems.includes(item.id) ? styles.selectedItem : {}],\n      onPress: function onPress() {\n        return handleSelectItem(item.id);\n      },\n      activeOpacity: 0.6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 25\n      }\n    }, React.createElement(SvgUri, {\n      width: 42,\n      height: 42,\n      uri: item.image_url,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 29\n      }\n    }), React.createElement(Text, {\n      style: styles.itemTitle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 29\n      }\n    }, item.title, \" \"));\n  }))));\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingHorizontal: 32,\n    paddingTop: 20 + Constants.statusBarHeight\n  },\n  title: {\n    fontSize: 20,\n    fontFamily: 'Ubuntu_700Bold',\n    marginTop: 24\n  },\n  description: {\n    color: '#6C6C80',\n    fontSize: 16,\n    marginTop: 4,\n    fontFamily: 'Roboto_400Regular'\n  },\n  mapContainer: {\n    flex: 1,\n    width: '100%',\n    borderRadius: 10,\n    overflow: 'hidden',\n    marginTop: 16\n  },\n  map: {\n    width: '100%',\n    height: '100%'\n  },\n  mapMarker: {\n    width: 90,\n    height: 80\n  },\n  mapMarkerContainer: {\n    width: 90,\n    height: 70,\n    backgroundColor: '#34CB79',\n    flexDirection: 'column',\n    borderRadius: 8,\n    overflow: 'hidden',\n    alignItems: 'center'\n  },\n  mapMarkerImage: {\n    width: 90,\n    height: 45,\n    resizeMode: 'cover'\n  },\n  mapMarkerTitle: {\n    flex: 1,\n    fontFamily: 'Roboto_400Regular',\n    color: '#FFF',\n    fontSize: 13,\n    lineHeight: 23\n  },\n  itemsContainer: {\n    flexDirection: 'row',\n    marginTop: 16,\n    marginBottom: 32\n  },\n  item: {\n    backgroundColor: '#fff',\n    borderWidth: 2,\n    borderColor: '#eee',\n    height: 120,\n    width: 120,\n    borderRadius: 8,\n    paddingHorizontal: 16,\n    paddingTop: 20,\n    paddingBottom: 16,\n    marginRight: 8,\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    textAlign: 'center'\n  },\n  selectedItem: {\n    borderColor: '#34CB79',\n    borderWidth: 2\n  },\n  itemTitle: {\n    fontFamily: 'Roboto_400Regular',\n    textAlign: 'center',\n    fontSize: 13\n  }\n});\nexport default Points;","map":{"version":3,"sources":["C:/Users/Breno/Documents/www/mobile/src/Pages/Points/index.tsx"],"names":["React","useState","useEffect","Constants","Feather","Icon","useNavigation","MapView","Marker","SvgUri","Location","api","Points","items","setItems","selectedItems","setSelectedItems","initialPosition","setInitialPosition","navigation","loadPosition","requestPermissionsAsync","status","Alert","alert","getCurrentPositionAsync","localtion","coords","latitude","longitude","get","then","response","data","handleNavigateBack","goBack","handleNavigatetoDetail","navigate","handleSelectItem","id","alreadySelected","findIndex","item","filteredItems","filter","styles","container","title","description","mapContainer","map","latitudeDelta","longitudeDelta","mapMarker","mapMarkerContainer","mapMarkerImage","uri","mapMarkerTitle","itemsContainer","paddingHorizontal","String","includes","selectedItem","image_url","itemTitle","StyleSheet","create","flex","paddingTop","statusBarHeight","fontSize","fontFamily","marginTop","color","width","borderRadius","overflow","height","backgroundColor","flexDirection","alignItems","resizeMode","lineHeight","marginBottom","borderWidth","borderColor","paddingBottom","marginRight","justifyContent","textAlign"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Constants from 'expo-constants';\r\nimport { Feather as Icon } from '@expo/vector-icons';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { View, Image, StyleSheet, TouchableOpacity, Text, ScrollView, Alert } from 'react-native';\r\nimport MapView, { Marker } from 'react-native-maps';\r\nimport { SvgUri } from 'react-native-svg';\r\nimport * as Location from 'expo-location';\r\n\r\nimport api from '../../services/api';\r\n\r\ninterface Item {\r\n    id: number;\r\n    title: string;\r\n    image_url: string;\r\n}\r\n\r\nconst Points = () => {\r\n    const [items, setItems] = useState<Item[]>([]);\r\n    const [selectedItems, setSelectedItems] = useState<number[]>([]);\r\n\r\n    const [initialPosition, setInitialPosition] = useState<[number, number]>([0, 0]);\r\n\r\n    const navigation = useNavigation();\r\n\r\n    useEffect(() => {\r\n        async function loadPosition() {\r\n            const { status } = await Location.requestPermissionsAsync();\r\n\r\n            if (status !== 'granted') {\r\n                Alert.alert('Ooooops....', 'Precisamos de sua permissão para obter a localização');\r\n                return;\r\n            }\r\n\r\n            const localtion = await Location.getCurrentPositionAsync();\r\n\r\n            const { latitude, longitude } = localtion.coords;\r\n\r\n            setInitialPosition([\r\n                latitude,\r\n                longitude\r\n            ]);\r\n        }\r\n\r\n        loadPosition();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        api.get('/items').then(response => {\r\n            setItems(response.data);\r\n        })\r\n    }, []);\r\n\r\n\r\n    function handleNavigateBack() {\r\n        navigation.goBack();\r\n    }\r\n\r\n    function handleNavigatetoDetail() {\r\n        navigation.navigate('Detail');\r\n    }\r\n\r\n    function handleSelectItem(id: number) {\r\n        const alreadySelected = selectedItems.findIndex(item => item == id);\r\n\r\n        if (alreadySelected >= 0) {\r\n            const filteredItems = selectedItems.filter(item => item !== id);\r\n\r\n            setSelectedItems(filteredItems);\r\n        } else {\r\n            setSelectedItems([...selectedItems, id]);\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <View style={styles.container}>\r\n                <TouchableOpacity onPress={handleNavigateBack}>\r\n\r\n                    <Icon name=\"arrow-left\" size={20} color=\"#34cb79\" />\r\n                </TouchableOpacity>\r\n\r\n                <Text style={styles.title}>Bem-vindo </Text>\r\n                <Text style={styles.description}>Encontre no mapa um ponto de coleta. </Text>\r\n\r\n                <View style={styles.mapContainer}>\r\n                    {initialPosition[0] !== 0 && (\r\n                        <MapView style={styles.map}\r\n                            initialRegion={{\r\n                                latitude: -initialPosition[0],\r\n                                longitude: initialPosition[1],\r\n                                latitudeDelta: 0.014,\r\n                                longitudeDelta: 0.014,\r\n                            }}\r\n                        >\r\n                            <Marker\r\n                                style={styles.mapMarker}\r\n                                onPress={handleNavigatetoDetail}\r\n                                coordinate={{\r\n                                    latitude: - 15.8383886,\r\n                                    longitude: -48.0110296,\r\n                                }}\r\n                            >\r\n                                <View style={styles.mapMarkerContainer}>\r\n                                    <Image style={styles.mapMarkerImage} source={{ uri: 'https://images.unsplash.com/photo-1556767576-5ec41e3239ea?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=400&q=60' }} />\r\n                                    <Text style={styles.mapMarkerTitle}>Mercado</Text>\r\n                                </View>\r\n                            </Marker>\r\n                        </MapView>\r\n                    )}\r\n                </View>\r\n            </View>\r\n            <View style={styles.itemsContainer}>\r\n                <ScrollView horizontal showsVerticalScrollIndicator={false} contentContainerStyle={{ paddingHorizontal: 20 }}>\r\n                    {items.map(item => (\r\n                        <TouchableOpacity key={String(item.id)} style={[styles.item, selectedItems.includes(item.id) ? styles.selectedItem : {}]} onPress={() => handleSelectItem(item.id)} activeOpacity={0.6} >\r\n                            <SvgUri width={42} height={42} uri={item.image_url} />\r\n                            <Text style={styles.itemTitle} >{item.title} </Text>\r\n                        </TouchableOpacity>\r\n                    ))}\r\n                </ScrollView>\r\n            </View>\r\n        </>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        paddingHorizontal: 32,\r\n        paddingTop: 20 + Constants.statusBarHeight,\r\n    },\r\n\r\n    title: {\r\n        fontSize: 20,\r\n        fontFamily: 'Ubuntu_700Bold',\r\n        marginTop: 24,\r\n    },\r\n\r\n    description: {\r\n        color: '#6C6C80',\r\n        fontSize: 16,\r\n        marginTop: 4,\r\n        fontFamily: 'Roboto_400Regular',\r\n    },\r\n\r\n    mapContainer: {\r\n        flex: 1,\r\n        width: '100%',\r\n        borderRadius: 10,\r\n        overflow: 'hidden',\r\n        marginTop: 16,\r\n    },\r\n\r\n    map: {\r\n        width: '100%',\r\n        height: '100%',\r\n    },\r\n\r\n    mapMarker: {\r\n        width: 90,\r\n        height: 80,\r\n    },\r\n\r\n    mapMarkerContainer: {\r\n        width: 90,\r\n        height: 70,\r\n        backgroundColor: '#34CB79',\r\n        flexDirection: 'column',\r\n        borderRadius: 8,\r\n        overflow: 'hidden',\r\n        alignItems: 'center'\r\n    },\r\n\r\n    mapMarkerImage: {\r\n        width: 90,\r\n        height: 45,\r\n        resizeMode: 'cover',\r\n    },\r\n\r\n    mapMarkerTitle: {\r\n        flex: 1,\r\n        fontFamily: 'Roboto_400Regular',\r\n        color: '#FFF',\r\n        fontSize: 13,\r\n        lineHeight: 23,\r\n    },\r\n\r\n    itemsContainer: {\r\n        flexDirection: 'row',\r\n        marginTop: 16,\r\n        marginBottom: 32,\r\n    },\r\n\r\n    item: {\r\n        backgroundColor: '#fff',\r\n        borderWidth: 2,\r\n        borderColor: '#eee',\r\n        height: 120,\r\n        width: 120,\r\n        borderRadius: 8,\r\n        paddingHorizontal: 16,\r\n        paddingTop: 20,\r\n        paddingBottom: 16,\r\n        marginRight: 8,\r\n        alignItems: 'center',\r\n        justifyContent: 'space-between',\r\n\r\n        textAlign: 'center',\r\n    },\r\n\r\n    selectedItem: {\r\n        borderColor: '#34CB79',\r\n        borderWidth: 2,\r\n    },\r\n\r\n    itemTitle: {\r\n        fontFamily: 'Roboto_400Regular',\r\n        textAlign: 'center',\r\n        fontSize: 13,\r\n    },\r\n});\r\n\r\n\r\nexport default Points;"]},"metadata":{},"sourceType":"module"}